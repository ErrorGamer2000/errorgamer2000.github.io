<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="index.css" />
    <title>Scratch Audio Analyzer</title>
    <link rel="icon" href="src/icon.svg" />
    <meta charset="UTF-8" />
  </head>
  <body>
    <img id="logo" src="src/icon.svg" />
    <div id="titlebar">
      <h1><img src="src/Scratch Logo.svg" style="display: inline-block; height: 1.5em; margin: 0;" /> Audio Analyzer</h1>
    </div>
    <div id="overlay" data-hidden="true">
      <h3>Analyzing Your Audio...</h3>
      <div class="spinner"></div>
    </div>
    <div class="container grey" style="top: 150px;">
      <div id="desc">
        <h2>What is it and what does it do?</h2>
        <p id="description">Scratch Audio Analyzer is a tool that takes any song and turns it into an easy to use list of points over time. It make creating equalizer effects easier than ever!</p>
        <p id="affiliation">Scratch Audio Analyzer is not in any way affiliated with Scratch</p>
        <h2 id="how">How to use</h2>
        <p id="use">Firt you are going to need a new Scratch Project, with the variables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="block">(bar height)</code><code class="block">(bar variation)</code><code class="block">(bar smoothness)</code>and the list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="block">frames::list ring</code><br>
        Upload your music below, and download the generated file. Once it is finished, go back to Scratch and right-click on the list and import the file.<br>
        Then, in your sprite add this script:</p>
        <pre class="blocks" id="mainScript">
        when flag clicked
        start sound (your song v)
        go to x: [x position of bar] y: [y position of bar]
        forever
          change y by (((((bar height) * (item ([floor v] of ((30) * (timer))) of [frames v])) + ((pick random (0) to (bar variation)) + [y position of rest])) - (y position)) / (bar smoothness))
        end
        </pre>
        <p id="example">The result:</p>
        <iframe src="https://turbowarp.org/519194850/embed?username&interpolate" width="499" height="416" allowtransparency="true" frameborder="0" scrolling="no" allowfullscreen></iframe>
        <div class="insetDash"></div>
        <div class="background"></div>
      </div>
    </div>
    <div class="container" id="main-content" style="top: 1200px;">
      <div id="upload">
        <h2>Step 1</h2>
        <div class="customUpload">
          <button id="uploadbtn">Choose A file</button>
          <input type="file" accept="audio/*" />
        </div>
        <h4>or</h4>
        <h5>Drop a file here</h5>
        <div class="insetDash"></div>
        <div class="background"></div>
        <div class="highlight"></div>
      </div>
      <div id="step2">
        <h2>Step 2</h2>
        <p class="subtitle">Preview</p>
        <div id="canvascontainer"><canvas></canvas></div>
        <div class="insetDash"></div>
        <div class="background"></div>
      </div>
      <div id="step3">
        <h2>Step 3</h2>
        <p class="subtitle">Download</p>
        <button id="downloadbtn" style="top: 7rem; left: calc(50% - 40px); position: absolute;">Download</button>
        <div class="insetDash"></div>
        <div class="background"></div>
      </div>
      <div class="spacer" style="height: 100px; position: absolute; top: 1450px; width: 15px;" />
    </div>
    <audio id="main" data-hidden="true" controls></audio>
    <script src="src/scratchblocks-v3.5-min.js"></script>
    <script src="setup/index.js"></script>
    <script src="analyzer/index.js"></script>
    <script src="index.js"></script>
  </body>
</html>